<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>詩者的咖啡廳</title>
<style>
  body {font-family:'Arial',sans-serif; background:#f5f0e1; margin:0; padding:0;}
  header {background:#8b5e3c; color:#fff; text-align:center; padding:1rem 0;}
  .tabs {display:flex; justify-content:center; background:#ffe8c2; border-bottom:2px solid #c9893e;}
  .tab {padding:1rem 2rem; cursor:pointer; font-weight:bold; color:#6b3e1b;}
  .tab.active {background:#f4a261; border-bottom:3px solid #c9893e; color:#fff;}
  .container {width:90%; margin:2rem auto;}
  .search-bar, .category-bar {display:flex; justify-content:center; flex-wrap:wrap; gap:10px; margin-bottom:1rem;}
  .search-bar input {padding:0.6rem; width:60%; border:1px solid #ccc; border-radius:5px;}
  .search-bar button, .category-bar button {padding:0.6rem 1rem; border:none; border-radius:5px; background:#f4a261; color:#fff; cursor:pointer;}
  .products {display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:1rem;}
  .product {background:#fff; border-radius:10px; overflow:hidden; text-align:center; box-shadow:0 2px 5px rgba(0,0,0,0.1);}
  .product img {width:100%; height:180px; object-fit:cover;}
  .product-content {padding:0.8rem;}
  .product-content h3 {margin:0.5rem 0; color:#5a3e1b;}
  .product-content p {margin:0.3rem 0; color:#666;}
  .product-content .stock {font-weight:bold;}
  .product-content button {margin-top:0.5rem; background:#f4a261; color:#fff; border:none; border-radius:5px; padding:0.5rem 1rem; cursor:pointer;}
  .cart, .inventory {display:none; background:#fff8ef; padding:1rem; border-radius:10px;}
  .inventory table {width:100%; border-collapse:collapse; margin-bottom:1rem;}
  .inventory th, .inventory td {border:1px solid #ccc; padding:0.5rem; text-align:center;}
  .inventory input {width:60px; padding:0.3rem;}
  footer {text-align:center; padding:1.5rem; background:#ffe8c2; color:#8b4513; margin-top:2rem;}
  button:hover{opacity:0.9;}
</style>
</head>
<body>

<header>
  <h1>詩者的咖啡廳</h1>
  <p>每日新鮮出爐的麵包與精選飲品</p>
</header>

<div class="tabs">
  <div class="tab active" id="tab-products" onclick="switchTab('products')">商品區</div>
  <div class="tab" id="tab-cart" onclick="switchTab('cart')">購物車</div>
  <div class="tab" id="tab-inventory" onclick="switchTab('inventory')">進銷存管理</div>
</div>

<div class="container">
  <div id="product-section">
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="搜尋商品...">
      <button onclick="searchProduct()">搜尋</button>
      <button onclick="clearSearch()">清除</button>
    </div>
    <div class="category-bar">
      <button onclick="filterCategory('all')">全部</button>
      <button onclick="filterCategory('甜麵包')">甜麵包</button>
      <button onclick="filterCategory('鹹麵包')">鹹麵包</button>
      <button onclick="filterCategory('可頌')">可頌</button>
      <button onclick="filterCategory('吐司')">吐司</button>
      <button onclick="filterCategory('蛋糕')">蛋糕</button>
      <button onclick="filterCategory('飲品')">飲品</button>
    </div>
    <div class="products" id="productList"></div>
  </div>

  <div class="cart" id="cart-section">
    <h2>🛒 購物車</h2>
    <ul id="cartItems"></ul>
    <p id="totalPrice">總金額：$0</p>
    <button onclick="checkout()">結帳</button>
  </div>

  <div class="inventory" id="inventory-section">
    <h2>🏢 進銷存管理</h2>
    <table>
      <thead>
        <tr><th>商品名稱</th><th>價格</th><th>庫存</th><th>進貨數量</th><th>操作</th></tr>
      </thead>
      <tbody id="inventoryTable"></tbody>
    </table>
    <h3>銷售紀錄</h3>
    <ul id="salesRecords"></ul>
  </div>
</div>

<footer>
  <p>© 2025 詩者的咖啡廳 — 用甜香的麵包與飲品溫暖每一天</p>
</footer>

<script>
document.addEventListener('DOMContentLoaded',()=>{
let products=[
{id:1,name:'法國長棍',price:80,img:'https://images.unsplash.com/photo-1574169208507-6d8c2b0b5d0f',category:'鹹麵包',stock:20},
{id:2,name:'牛角可頌',price:60,img:'https://images.unsplash.com/photo-1608198093002-ad4e005484ec',category:'可頌',stock:15},
{id:3,name:'奶油餐包',price:40,img:'https://images.unsplash.com/photo-1606813909023-7b8c3e3f3f7d',category:'甜麵包',stock:25},
{id:4,name:'丹麥麵包',price:70,img:'https://images.unsplash.com/photo-1606811842171-64d8b2f568b1',category:'甜麵包',stock:18},
{id:5,name:'肉桂捲',price:85,img:'https://images.unsplash.com/photo-1623198231827-9b38b0a688b4',category:'甜麵包',stock:12},
{id:6,name:'巧克力可頌',price:65,img:'https://images.unsplash.com/photo-1588196749597-9ff075ee6b5b',category:'可頌',stock:20},
{id:7,name:'蜂蜜吐司',price:55,img:'https://images.unsplash.com/photo-1612874742237-6529b6bde9d7',category:'吐司',stock:22},
{id:8,name:'芝士貝果',price:75,img:'https://images.unsplash.com/photo-1608738419019-76d3b7e20526',category:'鹹麵包',stock:18},
{id:9,name:'紅豆麵包',price:50,img:'https://images.unsplash.com/photo-1627308595229-7830a5c91f9f',category:'甜麵包',stock:30},
{id:10,name:'藍莓馬芬',price:70,img:'https://images.unsplash.com/photo-1627308595229-7830a5c91f9f',category:'蛋糕',stock:15},
{id:11,name:'乳酪蛋糕',price:90,img:'https://images.unsplash.com/photo-1608198093002-ad4e005484ec',category:'蛋糕',stock:12},
{id:12,name:'拿鐵咖啡',price:120,img:'https://images.unsplash.com/photo-1511920170033-f8396924c348',category:'飲品',stock:25},
{id:13,name:'美式咖啡',price:100,img:'https://images.unsplash.com/photo-1509042239860-f550ce710b93',category:'飲品',stock:30},
{id:14,name:'鮮榨柳橙汁',price:90,img:'https://images.unsplash.com/photo-1562967916-eb82221dfb36',category:'飲品',stock:20},
{id:15,name:'抹茶拿鐵',price:130,img:'https://images.unsplash.com/photo-1589308078050-9e6f7d5f63c4',category:'飲品',stock:18}
];
let cart=[],sales=[];

function displayProducts(list){
  const productList=document.getElementById('productList');
  productList.innerHTML='';
  list.forEach(product=>{
    const div=document.createElement('div');
    div.className='product';
    div.innerHTML=`
      <img src="${product.img}" alt="${product.name}">
      <div class="product-content">
        <h3>${product.name}</h3>
        <p>$${product.price}</p>
        <p class="stock">庫存: ${product.stock}</p>
        <button onclick="addToCart(${product.id})">加入購物車</button>
      </div>`;
    productList.appendChild(div);
  });
}

function searchProduct(){
  const keyword=document.getElementById('searchInput').value.toLowerCase();
  displayProducts(products.filter(p=>p.name.toLowerCase().includes(keyword)));
}
function clearSearch(){document.getElementById('searchInput').value=''; displayProducts(products);}
function filterCategory(cat){displayProducts(cat==='all'?products:products.filter(p=>p.category===cat));}
function switchTab(tab){
  document.getElementById('product-section').style.display=tab==='products'?'block':'none';
  document.getElementById('cart-section').style.display=tab==='cart'?'block':'none';
  document.getElementById('inventory-section').style.display=tab==='inventory'?'block':'none';
  document.getElementById('tab-products').classList.toggle('active',tab==='products');
  document.getElementById('tab-cart').classList.toggle('active',tab==='cart');
  document.getElementById('tab-inventory').classList.toggle('active',tab==='inventory');
}
function addToCart(id){
  const item=products.find(p=>p.id===id);
  if(item.stock<=0){alert('庫存不足'); return;}
  const exist=cart.find(c=>c.id===id);
  if(exist){ if(exist.qty+1>item.stock){alert('庫存不足'); return;} exist.qty+=1;}
  else cart.push({...item,qty:1});
  updateCart();
}
function updateCart(){
  const cartItems=document.getElementById('cartItems'); cartItems.innerHTML='';
  let total=0;
  cart.forEach(item=>{
    total+=item.price*item.qty;
    const li=document.createElement('li');
    li.textContent=`${item.name} x ${item.qty} - $${item.price*item.qty}`;
    const btn=document.createElement('button'); btn.textContent='移除';
    btn.style.marginLeft='10px'; btn.onclick=()=>{removeFromCart(item.id);};
    li.appendChild(btn); cartItems.appendChild(li);
  });
  document.getElementById('totalPrice').textContent=`總金額：$${total}`;
}
function removeFromCart(id){ cart=cart.filter(c=>c.id!==id); updateCart();}
function checkout(){
  if(cart.length===0){alert('購物車是空的'); return;}
  cart.forEach(item=>{
    const prod=products.find(p=>p.id===item.id); prod.stock-=item.qty;
    sales.push({...item,date:new Date().toLocaleString()});
  });
  alert(`結帳成功！總金額：$${cart.reduce((sum,c)=>sum+c.price*c.qty,0)}`);
  cart=[]; updateCart(); displayProducts(products); updateInventoryTable();
}
function updateInventoryTable(){
  const tbody=document.getElementById('inventoryTable'); tbody.innerHTML='';
  products.forEach(p=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${p.name}</td><td>$${p.price}</td>
      <td style="color:${p.stock<=5?'red':'black'}">${p.stock}</td>
      <td><input type="number" min="1" value="1" id="restock-${p.id}"></td>
      <td><button onclick="restock(${p.id})">進貨</button></td>`;
    tbody.appendChild(tr);
  });
  updateSalesRecords();
}
function restock(id){
  const qty=parseInt(document.getElementById(`restock-${id}`).value);
  if(qty>0){const prod=products.find(p=>p.id===id); prod.stock+=qty; updateInventoryTable(); alert(`已為 ${prod.name} 進貨 ${qty} 件`);}
}
function updateSalesRecords(){
  const salesList=document.getElementById('salesRecords'); salesList.innerHTML='';
  sales.forEach(item=>{const li=document.createElement('li'); li.textContent=`${item.date} - ${item.name} x ${item.qty} - $${item.price*item.qty}`; salesList.appendChild(li);});
}

displayProducts(products); updateInventoryTable(); updateCart();

// 全域函數
window.switchTab=switchTab; window.searchProduct=searchProduct;
window.clearSearch=clearSearch; window.filterCategory=filterCategory;
window.addToCart=addToCart; window.removeFromCart=removeFromCart;
window.checkout=checkout; window.restock=restock;

});
</script>
</body>
</html>
